<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/><meta name="description" content="Interactive decision diagram with automatic expansion as the user makes choices."/> <link rel="stylesheet" href="style.css"/> <!-- Copyright 1998-2021 by Northwoods Software Corporation. --><title>Family Identification : Pteridophytic Flora of Similipal</title></head><body>    <!-- Start of GoJS sample code -->        <script src="go.js"></script>    <div class="p-4 w-full">  <link href='https://fonts.googleapis.com/css?family=Roboto:400,500' rel='stylesheet' type='text/css'>    <script id="code">    function init() {      var $ = go.GraphObject.make;  // for conciseness in defining templates      myDiagram = $(go.Diagram, "myDiagramDiv",  // must name or refer to the DIV HTML element        {          initialContentAlignment: go.Spot.Left,          allowSelect: false,  // the user cannot select any part          // create a TreeLayout for the decision tree          layout: $(go.TreeLayout)        });      // custom behavior for expanding/collapsing half of the subtree from a node      function buttonExpandCollapse(e, port) {        var node = port.part;        node.diagram.startTransaction("expand/collapse");        var portid = port.portId;        node.findLinksOutOf(portid).each(function(l) {          if (l.visible) {            // collapse whole subtree recursively            collapseTree(node, portid);          } else {            // only expands immediate children and their links            l.visible = true;            var n = l.getOtherNode(node);            if (n !== null) {              n.location = node.getDocumentPoint(go.Spot.TopRight);              n.visible = true;            }          }        });        myDiagram.toolManager.hideToolTip();        node.diagram.commitTransaction("expand/collapse");      }      // recursive function for collapsing complete subtree      function collapseTree(node, portid) {        node.findLinksOutOf(portid).each(function(l) {          l.visible = false;          var n = l.getOtherNode(node);          if (n !== null) {            n.visible = false;            collapseTree(n, null);  // null means all links, not just for a particular portId          }        });      }      // get the text for the tooltip from the data on the object being hovered over      function tooltipTextConverter(data) {        var str = "";        var e = myDiagram.lastInput;        var currobj = e.targetObject;        if (currobj !== null && (currobj.name === "ButtonA" ||          (currobj.panel !== null && currobj.panel.name === "ButtonA"))) {          str = data.aToolTip;        } else {          str = data.bToolTip;        }        return str;      }      // define tooltips for buttons      var tooltipTemplate =        $("ToolTip",          { "Border.fill": "whitesmoke", "Border.stroke": "lightgray" },          $(go.TextBlock,            {              font: "13pt sans-serif",              wrap: go.TextBlock.WrapFit,              desiredSize: new go.Size(200, NaN),              alignment: go.Spot.Center,              margin: 6            },            new go.Binding("text", "", tooltipTextConverter))        );      // define the Node template for non-leaf nodes      myDiagram.nodeTemplateMap.add("decision",        $(go.Node, "Auto",          new go.Binding("text", "key"),          // define the node's outer shape, which will surround the Horizontal Panel          $(go.Shape, "Rectangle",            { fill: "whitesmoke", stroke: "lightgray" }),          // define a horizontal Panel to place the node's text alongside the buttons          $(go.Panel, "Horizontal",            $(go.TextBlock,              { font: "20px Roboto, sans-serif", margin: 5 },              new go.Binding("text", "key")),            // define a vertical panel to place the node's two buttons one above the other            $(go.Panel, "Vertical",              { defaultStretch: go.GraphObject.Fill, margin: 3 },              $("Button",  // button A                {                  name: "ButtonA",                  click: buttonExpandCollapse,                  toolTip: tooltipTemplate                },                new go.Binding("portId", "a"),                $(go.TextBlock,                  { font: '13px Roboto, sans-serif',                     wrap: go.TextBlock.WrapFit,                     desiredSize: new go.Size(200, NaN),                     margin: 5, },                  new go.Binding("text", "aText"))              ),  // end button A              $("Button",  // button B                {                  name: "ButtonB",                  click: buttonExpandCollapse,                  toolTip: tooltipTemplate                },                new go.Binding("portId", "b"),                $(go.TextBlock,                  { font: '13px Roboto, sans-serif',                    wrap: go.TextBlock.WrapFit,                     desiredSize: new go.Size(200, NaN),                     margin: 5, },                  new go.Binding("text", "bText"))              )  // end button B            )  // end Vertical Panel          )  // end Horizontal Panel        ));  // end Node and call to add      // define the Node template for leaf nodes      myDiagram.nodeTemplateMap.add("leaf",        $(go.Node, "Auto",          new go.Binding("text", "key"),          $(go.Shape, "Rectangle",            { fill: "whitesmoke", stroke: "lightgray" }),          $(go.TextBlock,            {              font: '20px Roboto, sans-serif',              wrap: go.TextBlock.WrapFit, desiredSize: new go.Size(200, NaN), margin: 5            },            new go.Binding("text", "text"))        ));      // define the only Link template      myDiagram.linkTemplate =        $(go.Link, go.Link.Orthogonal,  // the whole link panel          { fromPortId: "" },          new go.Binding("fromPortId", "fromport"),          $(go.Shape,  // the link shape            { stroke: "lightblue", strokeWidth: 2 })        );      // create the model for the decision tree      var model =        $(go.GraphLinksModel,          { linkFromPortIdProperty: "fromport" });      // set up the model with the node and link data      makeNodes(model);      makeLinks(model);      myDiagram.model = model;      // make all but the start node invisible      myDiagram.nodes.each(function(n) {        if (n.text !== "1") n.visible = false;      });      myDiagram.links.each(function(l) {        l.visible = false;      });    }    function makeNodes(model) {      var nodeDataArray = [        { key:"1",           aText: "Branches, leaves and sporangia bearing structure all arranged in whorls, stem ribbed, aerial, jointed and hollowed",          bText: "Not so as above",          x: "1xf",          y: "2", isFinal: false },        { key:"1xf", text: "Equisetaceae", isFinal: true },        { key:"2",          aText: "Leaves microphyllous, with single central vein, sporangia borne singly on the upper side of fertile pinnae near base",           bText: "Leaves megaphyllous, with various types of veins, sporangia borne on the margin or on the abaxial surface of lamina generally in clusters.",          x: "3",          y: "5", isFinal: false },        { key:"3",           aText: "Spores one kind, leaves without ligules, vegetative leaves usually monomorphic",           bText: "Spores two kinds, leaves with ligule, vegetative lea mostl dimorphic",           x: "4",           y: "3yf", isFinal: false },                  { key:"3yf", text:"Selaginellaceae", isFinal: true },        { key:"4",           aText: "Plant isodichotomously branched, roots basal, sporangia cauline or axillary,spores pitted",             bText: "Plants monopodially branched, roots scattered, sporangia foliar, spores without pits.",          x:"4xf",          y:"4yf", isFinal: false },        { key: "4xf", text: "Huperziaceae", isFinal: true },        { key: "4yf", text: "Lycopodiaceae", isFinal: true },        { key:"5",           aText: "Sporangia originating from a group of cells (Eusporangiate); its wallconsist of several layer of cells",          bText: "Sporangia originated from single superficial cells; its wall consists of a single layer of cells.",           x: "6",          y: "8", isFinal: false },        { key:"6",           aText: "Rhizome short, fleshy, without scales, leaves not circinate in bud, without stipule at base.",          bText: "Rhizome erect, massive or horizontal. Leaves circinate in buds with stipules like appendages at base",          x: "7",          y: "6yf", isFinal: false },        { key:"6yf", text:"Angiopteridaceae", isFinal: true },        { key:"7",           aText: "Venation dichotomous, open, sterile blade pinnate or tripartite with many small ultimate division. Sporangia globose, dehiscing horizontally.Gametophyte simple, unbranche",           bText: "Venation reticulate, sterile blades simple. Sproangia arranged in two lateral rows. Gametophyte branched",          x:"7xf",          y: "7yf", isFinal: false },        { key:"7xf", text: "Botrychiaceae", isFinal: true },        { key:"7yf", text: "Ophioglossaceae", isFinal: true },        { key:"8",           aText: "Aquatic or marshy plants",          bText: "Terrestrial, epiphytic or petrophyllous plants",          x: "9",          y: "11", isFinal: false },        { key:"9",           aText: "Sporangia borne in sporocarps",          bText: "Sporangia protected by reflexed leaf margin",          x: "10",          y: "9yf", isFinal: false },        { key: "9yf", text: "Parkeriaceae", isFinal: true },        { key:"10",           aText: "Plants floating in water",           bText: "Plants rooted in mud ",          x: "10xf",          y: "10yf", isFinal: false },        { key: "10xf", text: "Salviniaceae", isFinal: true },        { key: "10yf", text: "Marsileaceae", isFinal: true },        { key:"11",           aText: "Tree ferns",           bText: "Not tree ferns",           x: "11xf",          y: "12", isFinal: false },        { key: "11xf", text: "Cyatheaceae", isFinal: true },        { key:"12",           aText: "Fronds dichotomously or pseudodichotomously branched with a dormant but at the axil of the fork.",           bText: "Not so as above.",           x: "12xf",          y: "13", isFinal: false },        { key: "12xf", text: "Glecheniaceae", isFinal: true },        { key:"13",           aText: "Plants climbing or clinging.",           bText: "Plants not climbing",          x: "14",          y: "15", isFinal: false },        { key:"14",          aText: "Plants clinging, with distinct humous collecting fronds.",           bText: "Plants climbing/twinning, without separate umous collecting fronds",          x: "14xf",          y: "14yf", isFinal: false },        { key: "14xf", text: "Drynariaceae", isFinal: true },        { key: "14yf", text: "Lygodiaceae", isFinal: true },        { key:"15",           aText: "Lamina usually one cell thick and without stomata",           bText: "Not so as above",           x: "15xf",          y: "16", isFinal: false },        { key: "15xf", text: "Hymenophyllaceae", isFinal: true },        { key:"16",           aText: "Sporangia protected by reflexed margin of lamina",          bText: "Sporangia not protected by reflexed margin of lamina",          x: "17",          y: "20", isFinal: false },        { key:"17",          aText: "Sporangia borne on inner surface of reflexed portion of lamina",           bText: "Sporangia bome along the margin on the surface of lamina",          x: "17xf",          y: "18", isFinal: false },        { key: "17xf", text: "Adiantaceae", isFinal: true },        { key:"18",          aText: "Pseudoindusium continuous.",           bText: "Pseudoindusium discontinuous.",           x: "18xf",          y: "19", isFinal: false },        { key: "18xf", text: "Pteridaceae", isFinal: true },        { key:"19",           aText: "Rhizome hairy",           bText: "Rhizome scaly",           x: "19xf",          y: "19yf", isFinal: false },        { key: "19xf", text: "Pteridiaceae", isFinal: true },        { key: "19yf", text: "Sinopteridaceae", isFinal: true },        { key:"20",           aText: "Rhizome hairy",           bText: "Rhizome scaly",          x: "21",          y: "22", isFinal: false },        { key:"21",           aText: "Sporangia borne along veins",           bText: "Sporangia terminal on veins",           x: "21xf",          y: "21yf", isFinal: false },        { key: "21xf", text: "Hemionitidaceae", isFinal: true },        { key: "21yf", text: "Dennstaediaceae", isFinal: true },        { key:"22",           aText: "Rhizome scales clathrate.",          bText: "Rhizome scales usually non-clathrate or sometimes subclathrate",          x: "23",          y: "25", isFinal: false },        { key:"23",          aText: "Veins dichotomously forked.",           bText: "Not so as above.",          x: "23xf",          y: "24", isFinal: false },        { key: "23xf", text: "Antrophyaceae", isFinal: true },        { key:"24",          aText: "Sori round, oval or linear and in some cases achrostichoid, exindusiate.",           bText: "Sori strictly, indusiate",          x: "24xf",          y: "24yf", isFinal: false },        { key: "24xf", text: "Polypodiaceae", isFinal: true },        { key: "24yf", text: "Aspleniaceae", isFinal: true },        { key:"25",          aText: "Generally epiphytic ferns",           bText: "Terrestrial Ferns.",           x: "26",          y: "27", isFinal: false },        { key:"26",          aText: "Pinnac articulated to rachis.",           bText: "Pinnae not articulated to rachis",           x: "26xf",          y: "26yf", isFinal: false },        { key : "26xf", text: "Nephrolepidaceae", isFinal: true },        { key : "26yf", text: "Davalliaceae", isFinal: true },        { key:"27",          aText: "Indusium consists of tuft of multicellular hairs",           bText: "Not so as above.",          x: "27xf",          y: "28", isFinal: false },        { key: "27xf", text: "Woodsiaceae", isFinal: true },        { key:"28",           aText: "Sori parallel to costa",           bText: "Sori otherwise.",           x: "28xf",          y: "29", isFinal: false },        { key: "28xf", text: "Blechnaceae", isFinal: true },        { key:"29",          aText: "Sori marginal",           bText: "Sori not so as above",           x: "29xf",          y: "30", isFinal: false },        { key: "29xf", text: "Lindsaeaceae", isFinal: true },        { key:"30",          aText: "Indusium 'J' shaped along or crossing the veins.",           bText: "Indusium usually round and reniform",          x: "30xf",          y: "31", isFinal: false },        { key: "30xf", text: "Athyriaceae", isFinal: true },        { key:"31",          aText: "Rachis grooved on dorsal side, opening towards rachillae groove",           bText: "Rachis without dorsal groove or if grooved, not open to rachillae",          x: "31xf",          y: "32", isFinal: false },        { key: "31xf", text: "Dryopteridaceae", isFinal: true },        { key:"32",          aText: "Unicellular hairs abundant at least on dorsal side of costa, indusium round and reniform",           bText: "Multicellular hairs usually present at least on dorsal side of rachis, rachillac and costa.",           x: "32xf",           y: "32yf", isFinal: false },        {key: "32xf", text: "Thelypteridaceae", isFinal: true },        {key: "32yf", text: "Tectariaceae", isFinal: true }      ];      // Provide the same choice information for all of the nodes on each level.      // The level is implicit in the number of characters in the Key, except for the root node.      // In a different application, there might be different choices for each node, so the initialization would be above, where the Info's are created.      // But for this application, it makes sense to share the initialization code based on tree level.      for (var i = 0; i < nodeDataArray.length; i++) {        var d = nodeDataArray[i];        if (d.isFinal == false )        {          d.category = "decision";          d.a = "x";          d.b = "y";        }        else          d.category = "leaf";      }      model.nodeDataArray = nodeDataArray;    }    // The key strings implicitly hold the relationship information, based on their spellings.    // Other than the root node ("1"), each node's key string minus its last letter is the    // key to the "parent" node.    function makeLinks(model) {      var linkDataArray = [];      var nda = model.nodeDataArray;      for (var i = 0; i < nda.length; i++) {        if (nda[i].isFinal == false )        {          var start = nda[i].key;          var xEnd = nda[i].x;          var yEnd = nda[i].y;          console.log(start + "--x--" + xEnd) ;          var objX = { from: start, fromport: 'x', to: xEnd };          linkDataArray.push(objX);          console.log(start + "--y--" + yEnd) ;          var objY = { from: start, fromport: 'y', to: yEnd };          linkDataArray.push(objY);        }      }      model.linkDataArray = linkDataArray;    }    window.addEventListener('DOMContentLoaded', init);  </script><div id="sample">  <div id="myDiagramDiv" style="background-color: white; border: solid 1px black; width: 100%; height: 500px"></div>  <!-- <p>  This sample allows a user to make progressive decisions about personality types.  </p>  <p>  There are two kinds of nodes, so there are two node templates ("decision" and "leaf")  that determine the appearance and behavior of each <a>Node</a>.  </p>  <p>  The "decision" template displays the abbreviated personality type and two choice buttons, all surrounded by a figure.  Clicking a button will either expand the choice or will collapse all nodes leading from that choice.  </p>  <p>  The "leaf" template displays the personality descriptions, as the "leaf" nodes for the tree.  </p> --></div>    </div>    <!-- * * * * * * * * * * * * * -->    <!--  End of GoJS sample code  -->  </div></body><!--  This script is part of the gojs.net website, and is not needed to run the sample --><!-- <script src="../assets/js/goSamples.js"></script> --></html>